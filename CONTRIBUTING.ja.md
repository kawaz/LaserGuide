# LaserGuideへの貢献

## 開発ワークフロー

### ブランチ戦略

- `main`: 本番環境対応コード
- `feature/*`: 新機能
- `fix/*`: バグ修正
- `docs/*`: ドキュメント更新
- `chore/*`: メンテナンスタスク

### コミットメッセージ

自動バージョニングのためにコンベンショナルコミットを使用しています:

- `feat:` - 新機能（マイナーバージョンアップ）
- `fix:` - バグ修正（パッチバージョンアップ）
- `docs:` - ドキュメントのみの変更（リリースなし）
- `chore:` - 機能に影響しない変更（リリースなし）
- `refactor:` - コードのリファクタリング（パッチバージョンアップ）
- `test:` - テストの追加（リリースなし）
- `BREAKING CHANGE:` - 破壊的API変更（現在はマイナー扱い）

例:
```
feat: レーザー表示を切り替えるキーボードショートカットを追加
fix: 外部ディスプレイでのレーザー位置を修正
docs: インストール手順を更新
chore: 依存関係を更新
refactor: マウストラッキングロジックを簡素化
```

**重要**: コードファイル（.swift、.m、.plist等）を変更したコミットのみがリリースをトリガーします。

### リリースプロセス

#### 自動リリース（推奨）

PRをmainにマージするだけ！システムが自動的に:

1. **コード変更を検出**: コードファイルが変更された場合のみリリース
2. **バージョンを決定**: コミットメッセージに基づいて:
   - `feat:`コミット → マイナーバージョンアップ
   - その他のコード変更 → パッチバージョンアップ
3. **リリースを作成**: 自動的にタグ付け、ビルド、公開
4. **Caskを更新**: Homebrew caskが自動的に更新されます

#### 手動リリース（必要な場合）

バージョンを手動で制御する必要がある場合:

```bash
make version-patch  # バグ修正用（0.0.X）
make version-minor  # 新機能用（0.X.0）
make version-major  # 破壊的変更用（X.0.0）
git push origin v0.2.3
```

**注**: 自動プロセスにより、一貫したバージョニングが保証され、ドキュメントのみの更新で誤ってリリースされることを防ぎます。

### ローカルでのテスト

```bash
# デバッグ版をビルドして実行
make dev

# ビルドのみ
make build-debug

# Homebrew caskをローカルでテスト
brew install --cask ./Casks/laserguide.rb
```

## プルリクエストのプロセス

1. リポジトリをフォーク
2. フィーチャーブランチを作成（`git checkout -b feature/amazing-feature`）
3. 変更をコミット（`git commit -m 'feat: 素晴らしい機能を追加'`）
4. ブランチにプッシュ（`git push origin feature/amazing-feature`）
5. プルリクエストを開く

## コードスタイル

- SwiftLintルールに従う（設定されている場合）
- AppleのSwift APIデザインガイドラインに従う
- コードをモジュール化しテスト可能に保つ
